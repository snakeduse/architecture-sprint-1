# Задание 1

*Примечание. Задание 1 выполнено в рамках первых двух пунктов и представляет собой концепцию перехода приложения Mesto на микрофронтенды. Проект не содержит в себе код, готовый к запуску и выполнению.*

Команда приложения Mesto представляет собой группу React разработчиков, поэтому было принято решение в качестве основной технологии использовать фреймворк React.

В приложении Mesto выделяются следующие предметные области:

- Аутентификация;
- Профили пользователя;
- Карточки фотографий.

Каждой предметной области соответствует свое микрофронтенд-приложение:

- `auth` - Приложение аутентификации.  
Данное микрофронтенд-приложение содержит компоненты и логику работы со входом в приложение Mesto (signin) и выходом из приложения Mesto (signout), наполнением общего состояния о данных пользователя, пошедшего в систему. Так же реализует технологию сокрытия компонентов, если пользователь попытается работать с приложением, не осуществив вход (signin).  
Приложение так же содержит в себе модуль для выполнения запросов к REST API аутентификации;
- `profile` - Приложение для работы с профилями пользователей.  
Данное микрофронтенд-приложение содержит набор компонентов для работы с профилями пользователя.  
Приложение так же содержит в себе модуль для выполнения запросов к REST API профилей пользователя;
- `cards` - Приложение для работы с карточками фотографий.  
Данное микрофронтенд-приложение содержит компоненты для работы с карточками фотографий пользователя.  
Приложение так же содержит в себе модуль для выполнения запросов к REST API фотографий пользователя.

Дополнительно выделены следующие микрофронтенд-приложения:

- `host` - Основное приложение, которое объединяет в себе другие микрофронтенд-приложения. Данное приложение содержит каркас приложения Mesto и агрегирует в себе другие микрофронтенд-приложения;
- `lib` - Библиотека общих компонентами. Приложение предоставляет общие компоненты для других микрофронтенд-приложений.

Микрофронтенд-приложения располагаются в директории `/frontend/microfrontend`. Для наглядности оставлена и текущая монолитная реализация приложения Mesto.

Такой набор микрофронтенд-приложений позволяет:

- Независимо развивать разные части приложения Mesto разными командами разработки;
- Изолированно менять разные части приложения Mesto, уменьшая вероятность случайной поломки одних частей при изменении других;
- Персонально масштабировать каждое микрофронтенд-приложения при увеличении нагрузки;
- Проводить частые и независимые обновления микрофронтенд-приложений;
- Тестировать независимо каждое микрофронтенд-приложение;
- Развивать и усложнять интерфейс приложения Mesto.

В качестве инструмента композиции был выбран Webpack Module Federation. Это позволит создать динамическое и отзывчивое приложение. Т.к. в компании используется одна технология React, Module Federation так же позволит разделять общие компоненты между микрофронтенд-приложениями.

Некоторые микрофронтенд-приложения используют совместные данные. Приложение Mesto находится на раннем этапе развития и не требует сложных технологий управления состоянием, поэтому для начальных версий приложения для реализации общего состояния была выбрана технология React Context. В дальнейшем, по мере усложнения состояния приложения Mesto, планируется переход на библиотеку глобального состояния Redux. Технология Redux - это мощный инструмент управления общим состоянием, который позволит удовлетворить сложные требования к управлению состояния, в том числе, когда начнут появляться сложные иерархические состояния. Помимо этого Redux позволит реализовать паттерн `Observable state`, давая возможность компонентам подписываться на изменения состояния и реагировать при изменении состояния, что в свою очередь может привести к снижению связанности некоторых микрофронтенд-приложений между собой.

В будущем так же предполагается использование паттерна `Backend For Frontend` (BFF), что позволит масштабировать нагрузку точечно для каждого микрофронтенд-приложения и даст возможность сохранить простой REST API для конкретных микрофронтенд-приложений при параллельном развитии и усложнении серверной стороны (backend), когда серверная сторона будет переходить на микросервисную архитектуру и развивать ее.
Дополнительно BFF позволит предоставлять предварительно сгенерированную HTML-страницу содержащую необходимую информацию для SEO.

## Структура проекта

Ниже представлена общая структура микрофронтенд-приложения:

- `src` - Директория с исходным кодом;
- `src/blocks` - Директория с CSS-стилями;
- `src/components` - Директория содержит компоненты React;
- `src/utils` - Директория содержит вспомогательные утилиты и модули;
- `webpack.config.js` - Конфигурация Webpack.

В зависимости от микрофронтенд-приложения, некоторые компоненты могут быть опущены или расширены.

Отдельно стоит описать структуру общей библиотеки `lib`:

- `src` - Директория с исходным кодом;
- `src/blocks` - Директория с CSS-стилями общих компонентов React;
- `src/components` - Директория содержит общие компоненты React;
- `src/context` - Директория содержит общий контекст, который используется другими микрофронтенд-приложениями для работы с общим состоянием.
